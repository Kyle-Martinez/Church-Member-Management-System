<html>
    <head>
        <title>Ticket {{control_no}}</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
        <script type="text/javascript" src="/js/ticket.js"></script>
    </head>
    <body>
        {{> navbar}}
        <div style="padding: 1.25% 12.5% 6.25% 12.5%;align-items: center;">
            <div class="card" style="display: flex !important; border: 1px solid rgba(0,0,0,.125); margin: auto;" >
                <div class="card-header py-3 bg-{{status_color}} text-{{text_color}}">
                    <h3 id="control_number" class="mb-0" data-controlnumber="{{control_no}}">Control Number: {{control_no}}</h3>
                </div>
                <div class="card-body">
                {{#each info}}
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Timestamp:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{timestamp}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Requestor:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{name}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Date:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{date}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Email Address:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{email_address}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Division:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{division}}</p>
                        </div>
                    </div>
                    <div class="row mb-4 {{hideDept}}">
                        <div class="col-4">
                            <b><p>Department:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{department}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Property:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{property}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>iFAE Concern:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{category}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>{{category}} Concern:</p></b>
                        </div>
                        <div class="col-auto">
                            <p>{{subcategory}}</p>
                        </div>
                        <div class="col {{hideOther}}">
                            <p class="text-wrap">{{other}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Concern:</p></b>
                        </div>
                        <div class="col-8">
                            <p>{{concern}}</p>
                        </div>
                    </div>
                {{/each}}
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><label for="error">Error Type:</p></b>
                        </div>
                        <div class="col-8">
                            <select class="form-select" name="error" id="error" data-olderror="{{errorCodeCurrent}}" {{authorized}}>
                                <option value="{{errorCodeCurrent}}" selected hidden>{{errorCurrent}}</option>
                                {{#each errorItem}}
                                <option value="{{id}}">{{error}}</option>
                                {{/each}}
                            </select>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Assigned Personnel:</p></b>
                        </div>
                        <div class="col-8">
                            <p id="qaqc" data-qaqc="{{qaqc_code}}" style="border-bottom: 1px solid #ced4da; padding: .375rem 2.25rem .375rem .75rem;">{{qaqc}}</p>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><label for="resolution">Resolution: </label></b>
                        </div>
                        <div class="col-8">
                            <textarea class="form-control" id="resolution" name="resolution" value="{{resolution}}" data-oldresolution="{{resolution}}" {{authorized}}></textarea>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><label for="priority">Priority:</label></b>
                        </div>
                        <div class="col-8">
                            <select class="form-select" name="priority" id="priority" data-oldpriority="{{priorityCodeCurrent}}" {{authorized}}>
                                <option value="{{priorityCodeCurrent}}" selected hidden>{{priorityCurrent}}</option>
                                {{#each priorityItem}}
                                <option value="{{id}}">{{priority}}</option>
                                {{/each}}
                            </select>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><label for="status">Status:</label></b>
                        </div>
                        <div class="col-8">
                            <select class="form-select" name="status" id="status" data-oldstatus="{{statusCodeCurrent}}" {{authorized}}>
                                <option value="{{statusCodeCurrent}}" class="bg-{{status_color}} text-{{text_color}}" selected hidden>{{statusCurrent}}</option>
                                {{#each statusItem}}
                                <option class="bg-{{color_class}} text-{{text_color}}" value="{{id}}">{{status}}</option>
                                {{/each}}
                            </select>
                        </div>
                    </div>
                    <div class="row mb-4">
                        <div class="col-4">
                            <b><p>Date Completed:</p></b>
                        </div>
                        <div class="col-8">
                            <p id="datecompleted" data-datecompleted="{{dateCompleted}}" style="border-bottom: 1px solid #ced4da; padding: .375rem 2.25rem .375rem .75rem;">{{dateCompleted}}</p>
                        </div>
                    </div>
                    <div class="row mb-4 {{hide_transfer}}">
                        <div class="col-4">
                            <b><label for="transfer">Transfer to:</label></b>
                        </div>
                        <div class="col-8">
                            <select class="form-select" name="transfer" id="transfer" data-oldqaqc="{{qaqc_code}}" {{authorized}}>
                                <option value="{{qaqcCode}}" selected>Do Not Transfer</option>
                                {{#each qaqc_user}}
                                <option value="{{id}}">{{name}}</option>
                                {{/each}}
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary btn-lg btn-block" id="updateticket" disabled>Update Ticket</button>
                </div>
            </div>
        </div>
    </body>
</html>